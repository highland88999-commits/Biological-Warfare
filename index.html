<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://www.youtube.com/iframe_api"></script>
    
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>Artemis ‚Ä¢ Prime Symbiote</title>
    <style>
        :root {
            --cyan: #00f2ff;
            --gold: #d4af37;
            --virus-red: #ff2d55;
            --disease-green: #00ff9d;
            --portal-purple: #bc13fe;
            --glass: rgba(8, 8, 25, 0.75);
            --glow-c: 0 0 40px rgba(0, 242, 255, 0.7);
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body, html { 
            width:100%; height:100%; overflow:hidden; 
            background:#000; font-family: 'Courier New', monospace; 
            color:var(--cyan); touch-action: none; 
        }

        #landing-overlay {
            position: fixed; inset: 0; z-index: 2000;
            background: #000;
            display: flex; align-items: center; justify-content: center;
            flex-direction: column;
            color: var(--cyan);
            font-size: 3rem;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 1.2s ease-out;
        }
        #landing-overlay.hidden { opacity: 0; pointer-events: none; }
        #landing-text { 
            text-shadow: 0 0 30px var(--cyan); 
            animation: pulseText 3s infinite alternate; 
            z-index: 2; /* above rain */
        }
        @keyframes pulseText { 0% { opacity: 0.7; transform: scale(0.95); } 100% { opacity: 1; transform: scale(1.05); } }

        #rain-canvas {
            position: fixed; inset: 0; z-index: 1; /* behind text but on landing only */
            opacity: 0.35;
        }

        /* Hide rain canvas after landing */
        #rain-canvas.hidden { display: none; }

        /* Your existing styles for game overlays, cannon, hud, cells, etc. */
        #start-overlay, #countdown-overlay, #transition-overlay, #revive-overlay, #win-overlay {
            position: fixed; inset: 0; z-index: 1000;
            background: radial-gradient(circle, #1a0033 0%, #000 90%);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 1; pointer-events: auto;
        }
        #start-overlay { z-index: 500; text-align: center; padding: 20px; }
        #disclaimer { 
            max-width: 90%; 
            background: rgba(255,0,0,0.15); 
            border: 2px solid var(--gold); 
            padding: 15px; 
            border-radius: 12px; 
            margin: 20px auto; 
            font-size: 0.95rem; 
            color: #ffcc00; 
        }
        .btn { 
            width: 220px; height: 80px; margin: 20px;
            background: linear-gradient(to top, #0a0a1f, #111);
            border-radius: 40px; border: 4px solid var(--gold);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; color: var(--gold); cursor: pointer; transition: 0.2s;
        }
        .btn:active { transform: scale(0.95); }

        .spinner { width: 50px; height: 50px; border: 5px solid var(--cyan); border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; }

        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        #bg-video { 
            width: 100%; height: 100%; object-fit: cover; 
            filter: brightness(0.10) contrast(1.15) saturate(0.8); 
            animation: subtlePulse 20s infinite alternate; 
        }
        @keyframes subtlePulse { 0% { opacity: 0.85; } 100% { opacity: 1; } }

        #cannon { 
            position: fixed; bottom: -10px; left: 50%; transform: translateX(-50%); 
            width: 140px; height: 120px; z-index: 300; pointer-events: none; 
            background: linear-gradient(to top, #0a0a1f, #111); 
            border-radius: 70px 70px 0 0; border: 4px solid var(--gold); 
            display: flex; align-items: center; justify-content: center; 
            font-size: 1.1rem; color: var(--gold); 
            transition: transform 0.1s, box-shadow 0.1s; 
            box-shadow: 0 0 20px var(--gold);
        }
        #cannon.active { pointer-events: auto; }
        #cannon:active, #cannon.pressed { transform: translateX(-50%) scale(0.92); box-shadow: 0 0 60px var(--gold); }

        /* Add your cell-orb, hp-bar, hud-box, etc. styles here from previous version */
    </style>
</head>
<body>
    <!-- Landing page with digital rain -->
    <div id="landing-overlay">
        <canvas id="rain-canvas"></canvas>
        <div id="landing-text">CLICK TO BEGIN</div>
    </div>

    <!-- Game overlays (start, countdown, etc.) -->
    <div id="start-overlay">
        <h2 style="color:var(--gold); margin-bottom: 20px; font-size: 2rem;">Artemis ‚Ä¢ Prime Symbiote</h2>
        
        <div id="disclaimer">
            <strong>Heads up:</strong> This game is completely free, but hoodies and ongoing development are funded through player support and future features.<br>
            By playing, you're part of the journey to make real hoodies possible!<br>
            No purchases needed ‚Äî enjoy the grind! üöÄ
        </div>

        <div class="spinner" style="margin: 30px 0;"></div>
        <div class="btn" id="start-btn">‚ö° ENTER THE RIFT</div>
    </div>

    <!-- Keep your countdown-overlay, transition-overlay, revive-overlay, win-overlay here -->

    <div id="rift-portal"></div>
    <div id="engine-bg">
        <video id="bg-video" autoplay loop muted playsinline src="https://xo6u0xsindhyafqf.public.blob.vercel-storage.com/nexus_render%20%2811%29.webm"></video>
    </div>

    <div id="ytplayer"></div>

    <div id="oracle-nucleus"><video id="oracle-video" autoplay loop muted playsinline src="https://files.catbox.moe/no2e76.mp4"></video></div>
    <div id="orbital-canvas"></div>
    
    <div id="ui-layer">
        <div class="hud-box">
            LVL <span id="level">1</span>  ‚Ä¢  SCORE <span id="score">0</span>/1000
            <span id="music-toggle">[Music: OFF]</span>
            <span id="pause-toggle">[PAUSE]</span>
            <span id="boost-btn">BOOST: x2 (30s)</span>
        </div>
    </div>

    <div id="cannon">‚ö° DEPLOY</div>

    <script>
        // === DIGITAL RAIN (only on landing) ===
        const rainCanvas = document.getElementById('rain-canvas');
        const rainCtx = rainCanvas.getContext('2d');

        function resizeRainCanvas() {
            rainCanvas.width = window.innerWidth;
            rainCanvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeRainCanvas);
        resizeRainCanvas();

        const chars = '01„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()_+-=[]{}|;:,.<>?/'.split('');
        const fontSize = 14;
        const columns = rainCanvas.width / fontSize;
        const drops = Array(Math.floor(columns)).fill(1);

        function drawRain() {
            rainCtx.fillStyle = 'rgba(0, 0, 0, 0.05)';
            rainCtx.fillRect(0, 0, rainCanvas.width, rainCanvas.height);

            rainCtx.fillStyle = '#00eaff'; // cyan/teal
            rainCtx.font = fontSize + 'px monospace';

            for (let i = 0; i < drops.length; i++) {
                const text = chars[Math.floor(Math.random() * chars.length)];
                const x = i * fontSize;
                const y = drops[i] * fontSize;

                rainCtx.fillText(text, x, y);

                if (y > rainCanvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            }
        }

        let rainInterval;
        function startRain() {
            rainInterval = setInterval(drawRain, 50); // ~20fps for smooth but light
        }

        // === LANDING PAGE ===
        const landing = document.getElementById('landing-overlay');
        landing.addEventListener('click', () => {
            landing.classList.add('hidden');
            clearInterval(rainInterval); // stop rain
            rainCanvas.style.display = 'none'; // hide canvas completely
            // Proceed to main game (your existing start logic can go here if needed)
        });

        // Start rain immediately on page load (landing is first thing seen)
        startRain();

        // === YOUR EXISTING GAME CODE ===
        // (paste the rest of your script here: countdown, starter cells, gameLoop, music, etc.)
        // For example:
        const startBtn = document.getElementById('start-btn');
        startBtn.addEventListener('click', () => {
            // Your startCountdown() or loadProgress() etc.
            console.log('Game starting...');
            // Add your full game init code
        });

        // Keep all your other functions (Entity, fireCannon, spawnStarterCells, etc.)
    </script>
</body>
</html>
